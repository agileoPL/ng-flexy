{
  "schemaVersion": 2,
  "schema": [
    {
      "component": "fieldset",
      "properties": {
        "legend": "Calculations & conditions"
      },
      "children": [
        {
          "attributes": {
            "class": "row"
          },
          "children": [
            {
              "attributes": {
                "class": "col-2",
                "data-xxx": "xxx"
              },
              "component": "number",
              "name": "r1.a",
              "properties": {
                "label": "A"
              }
            },
            {
              "component": "number",
              "name": "r1.b",
              "properties": {
                "label": "B"
              },
              "attributes": {
                "class": "col-2"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r1.c",
              "properties": {
                "label": "C"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r1.d",
              "properties": {
                "label": "D"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r1.e",
              "properties": {
                "label": "E"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r1.sum",
              "calc": "$sum([r1.a,r1.b,r1.c,r1.d,r1.e])",
              "properties": {
                "label": "Sum row 1",
                "readonly": true
              }
            }
          ]
        },
        {
          "attributes": {
            "class": "row"
          },
          "children": [
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r2.a",
              "properties": {
                "label": "A"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r2.b",
              "properties": {
                "label": "B"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r2.c",
              "properties": {
                "label": "C"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r2.d",
              "properties": {
                "label": "D"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r2.e",
              "properties": {
                "label": "E"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r2.sum",
              "calc": "$sum([r2.a,r2.b,r2.c,r2.d,r2.e])",
              "properties": {
                "label": "Sum row 2",
                "readonly": true
              }
            }
          ]
        },
        {
          "attributes": {
            "class": "row"
          },
          "children": [
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r3.a",
              "properties": {
                "label": "A"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r3.b",
              "properties": {
                "label": "B"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r3.c",
              "properties": {
                "label": "C"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r3.d",
              "properties": {
                "label": "D"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r3.e",
              "properties": {
                "label": "E"
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "r3.sum",
              "calc": "$sum([r3.a,r3.b,r3.c,r3.d,r3.e])",
              "properties": {
                "label": "Sum row 3",
                "readonly": true
              }
            }
          ]
        },
        {
          "attributes": {
            "class": "row"
          },
          "children": [
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "sum.a",
              "calc": "$sum([r1.a,r2.a,r3.a])",
              "properties": {
                "label": "Sum col A",
                "readonly": true
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "sum.b",
              "calc": "$sum([r1.b,r2.b,r3.b])",
              "properties": {
                "label": "Sum col B",
                "readonly": true
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "sum.c",
              "calc": "$sum([r1.c,r2.c,r3.c])",
              "properties": {
                "label": "Sum col C",
                "readonly": true
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "sum.d",
              "calc": "$sum([r1.d,r2.d,r3.d])",
              "properties": {
                "label": "Sum col D",
                "readonly": true
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "sum.e",
              "calc": "$sum([r1.e,r2.e,r3.e])",
              "properties": {
                "label": "Sum col E",
                "readonly": true
              }
            },
            {
              "attributes": {
                "class": "col-2"
              },
              "component": "number",
              "name": "sum.sum",
              "calc": "$sum([sum.a,sum.b,sum.c,sum.d,sum.e])",
              "properties": {
                "label": "Sum of Sum",
                "readonly": true
              }
            }
          ]
        },
        {
          "if": "sum.sum > 0 and sum.sum < 20",
          "name": "isSuccess",
          "children": [
            {
              "component": "text",
              "calc": "sum.sum",
              "attributes": {
                "class": {
                  "alert": "isSuccess",
                  "alert-success": "isSuccess",
                  "d-block": "isSuccess"
                }
              },
              "properties": {
                "label": "Success: sum is under 20",
                "readonly": true
              }
            }
          ]
        },
        {
          "if": "sum.sum >= 20",
          "name": "isWarning",
          "children": [
            {
              "id": "sum_warning",
              "component": "text",
              "calc": "sum.sum",
              "attributes": {
                "class": {
                  "alert": "isWarning",
                  "alert-warning": "isWarning",
                  "d-block": "isWarning"
                }
              },
              "properties": {
                "label": "Warning: sum is over 20",
                "readonly": true
              }
            }
          ]
        }
      ]
    },
    {
      "component": "fieldset",
      "properties": {
        "legend": "Group 2"
      },
      "children": [
        {
          "component": "group",
          "properties": {
            "legend": "Heroes"
          },
          "name": "groups",
          "type": "group",
          "validators": {},
          "items": {
            "component": "fieldset",
            "properties": {},
            "children": [
              {
                "component": "array",
                "properties": {
                  "legend": "Heroes group {g1}"
                },
                "name": ".",
                "type": "array",
                "validators": {
                  "maxItems": 6,
                  "minItems": 1
                },
                "items": {
                  "component": "text",
                  "properties": {
                    "label": "Hero",
                    "placeholder": "Hero name",
                    "description": "Add hero name...",
                    "readonly": true
                  }
                }
              }
            ]
          },
          "indexDef": "{g1}"
        }
      ]
    },
    {
      "component": "fieldset",
      "properties": {
        "legend": "Group 1"
      },
      "children": [
        {
          "component": "array",
          "properties": {
            "legend": "Users",
            "removeAny": true
          },
          "name": "users",
          "type": "array",
          "validators": {},
          "items": {
            "component": "fieldset",
            "properties": {
              "legend": "User {%1}"
            },
            "children": [
              {
                "component": "text",
                "properties": {
                  "label": "First name"
                },
                "name": "name",
                "validators": {
                  "required": true
                }
              },
              {
                "component": "text",
                "properties": {
                  "label": "Last name"
                },
                "name": "surname",
                "validators": {
                  "required": true
                }
              }
            ]
          },
          "indexDef": "{%1}"
        }
      ]
    }
  ]
}
